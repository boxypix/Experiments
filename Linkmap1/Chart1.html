<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wind Speed Graph</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <style>
        body {
            background-color: #212634;
            color: #9FA9C8;
            font-family: Roboto, sans-serif;
            margin: 0;
            padding: 0;
        }
        #container {
            margin: 0 auto;
            height: 340px;
            max-width: 100%;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; font-size: 18px; margin: 10px 0;">Wind Speed Graph</h1>
    <div id="container"></div>

    <script>
        // Координаты и API-адрес
        const lat = 27.615513;
        const lon = -82.736779;
        const apiUrl = `https://api.open-meteo.com/v1/gfs?latitude=${lat}&longitude=${lon}&hourly=windspeed_10m,windgusts_10m&timezone=auto`;

        // Получение данных
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                const windSpeeds = data.hourly.windspeed_10m.map(speed => speed * 0.539957); // Перевод в узлы
                const windGusts = data.hourly.windgusts_10m.map(gust => gust * 0.539957);
                const labels = data.hourly.time.map(time => time.split("T")[1]); // Извлечение времени
                renderChart(labels, windSpeeds, windGusts);
            });

        function renderChart(labels, windSpeeds, windGusts) {
            Highcharts.chart('container', {
                chart: {
                    type: 'line',
                    backgroundColor: '#212634',
                    height: 340,
                    scrollablePlotArea: {
                        minWidth: 800, // Ширина для скролла
                        scrollPositionX: 1, // Начало с правого края
                    },
                },
                title: {
                    text: 'Wind Speed and Gusts',
                    style: {
                        color: '#9FA9C8',
                    },
                },
                xAxis: {
                    categories: labels,
                    tickInterval: 1, // Каждая отметка
                    labels: {
                        style: {
                            color: '#9FA9C8',
                        },
                    },
                    title: {
                        text: 'Time (every hour)',
                        style: {
                            color: '#9FA9C8',
                        },
                    },
                },
                yAxis: {
                    title: {
                        text: 'Wind Speed (knots)',
                        style: {
                            color: '#9FA9C8',
                        },
                    },
                    labels: {
                        style: {
                            color: '#9FA9C8',
                        },
                    },
                    gridLineColor: '#39435E',
                },
                tooltip: {
                    valueSuffix: ' knots',
                    backgroundColor: '#39435E',
                    style: {
                        color: '#9FA9C8',
                    },
                },
                plotOptions: {
                    line: {
                        marker: {
                            enabled: false,
                        },
                    },
                },
                series: [
                    {
                        name: 'Wind Speed',
                        data: windSpeeds,
                        color: '#FFFFFF',
                        lineWidth: 2,
                    },
                    {
                        name: 'Wind Gusts',
                        data: windGusts,
                        color: '#9FA9C8',
                        lineWidth: 1,
                        dashStyle: 'ShortDash',
                    },
                ],
                legend: {
                    itemStyle: {
                        color: '#9FA9C8',
                    },
                },
            });
        }
    </script>
</body>
</html>